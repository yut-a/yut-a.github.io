---
layout: post
title:  LSTM을 활용한 Risk Parity 전략 구현
date:   2021-01-12
image:  .jpg
tags:   Data Finance
---
## Risk Parity 전략 소개

**Risk Parity 전략**은 자산 배분 전략 중 하나로, 각 자산의 포트폴리오에 대한 **리스크 기여도를 동일하게 맞춰줄 수 있는 비중**으로 자산 배분하는 전략이다. 예를 들어, 아래와 같이 주식과 채권에 자산 배분을 하고자 하며, 각 자산 별 기대 수익률, 변동성, sharp ratio 다음과 같다고 한다.

만약 `60/40 포트폴리오` 전략을 사용한다면 주식에 60%, 채권에 40%를 투자하게 될 것이다. 이 때, 포트폴리오의 변동성은 아래와 같이 11.2%이며 기대 수익률은 5.35%이다. 또한, 각 자산 별 리스크 기여도도 다음과 같이 산출할 수 있다. 채권에 비해 주식의 리스크 기여도와 변동성이 매우 높다는 것을 확인할 수 있다.

이번에는 `Risk Parity 포트폴리오` 전략을 사용한다면, 주식과 채권의 리스크 기여도를 50대 50으로 동일하게 맞춰줄 수 있는 각 자산의 투자 비중을 산출하고, 그 비중으로 투자하게 될 것이다. 이러한 방식으로 각 자산 배분 비중을 산출하면, 주식은 20.5%, 채권은 79.5%에 투자하게 될 것이다. 이 때의 포트폴리오 변동성은 5.5%, 기대 수익률은 4.46%로 계산될 수 있다.

이러한 결과만 놓고 봤을 때, 60/40 포트폴리오 전략의 기대 수익률은 `5.35%`로, Risk Parity 포트폴리오 전략의 기대 수익률인 `4.46%`보다 높기 때문에 과연 Risk Parity 전략을 사용하는 것이 맞는 것인가 하는 의문이 들 수 있다. 하지만, 변동성을 확인해보면, 60/40 포트폴리오의 변동성이 2배 높은 것을 확인할 수 있다. Risk Parity 전략은 이러한 점을 활용한다. 60/40 포트폴리오 전략과 동일한 변동성으로 맞춰주기 위해 2배 레버리지를 사용한다. 레버리지 비용이 3%라고 가정했을 때, Risk Parity의 최종 수익률은 `(4.46% X 2) - 3% = 5.92%`이다. 따라서, 60/40 포트폴리오 전략보다 더 높은 수익률을 얻을 수 있다는 것을 알 수 있다.
<img width="1150" alt="스크린샷 2021-01-14 오후 12 09 46" src="https://user-images.githubusercontent.com/70478154/104539757-8352f300-5661-11eb-88b9-7dd6a65af44e.png"><BR/><BR/><BR/><BR/>

## 분석 목적

첫 번째 분석 목적은, 기존의 Risk Parity 전략을 사용했을 때, **과거 변동성으로 인한 괴리**가 발생할 수 있기 때문에 이를 해결하고자 분석을 진행했다. Risk Parity 전략에서 리스크 기여도를 동일하게 맞춰줄 수 있는 각 자산의 투자 비중을 산출하는 과정에서 각 자산의 과거 변동성을 활용한다. 만약 다음 Rebalancing 시점까지의 변동성이 크게 상승한다면, 투자 기간 동안의 변동성을 과소 평가한 결과를 낳을 것이고, 반대로 변동성이 크게 하락한다면, 과대 평가한 결과를 낳을 수 있다. 이러한 점으로 인해, 포트폴리오의 수익률을 극대화할 수 없게 된다. 따라서, LSTM 모델을 활용하여 예측된 변동성을 활용한다면, 이러한 괴리를 줄일 수 있지 않을까 기대한다.
<img width="1144" alt="스크린샷 2021-01-14 오후 12 20 32" src="https://user-images.githubusercontent.com/70478154/104540506-f1e48080-5662-11eb-9427-cb925917dfd0.png">

두 번째 분석 목적은, 적절한 자산 배분을 통해 **취약한 Risk 대응 능력**을 보완할 수 있기 때문에 분석을 진행했다. 최근 코로나로 인해, 주가가 급락하는 상황이 벌어졌다. 만약, 적절한 자산 배분을 하지 못했다면 이러한 Risk를 온전히 떠안을 지 모른다. 따라서, 적절한 자산 배분을 통해 안정적으로 수익률의 우상향 곡선을 그릴 수 있지 않을까 기대한다.
<img width="1144" alt="스크린샷 2021-01-14 오후 12 28 58" src="https://user-images.githubusercontent.com/70478154/104541037-1e4ccc80-5664-11eb-98e0-437024c1e59d.png"><BR/><BR/><BR/><BR/>

## 데이터 소개

활용한 데이터는 다음과 같다. 2011년 12월 23일부터 2020년 12월 1일까지의 S&P500 ETF와 국채 ETF 데이터를 활용했다. INPUT 데이터는 기술 지표들로 구성되어 있으며, OUTPUT 데이터는 다음 20일 간의 변동성으로 설정했다.
<img width="1142" alt="스크린샷 2021-01-14 오후 12 34 14" src="https://user-images.githubusercontent.com/70478154/104541362-d8443880-5664-11eb-8538-0f5848329c18.png"><BR/><BR/><BR/><BR/>

## 








