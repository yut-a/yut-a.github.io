---
layout: post
title:  주식 종목 추천 모델
date:   2020-11-05
image:  choice.jpg
tags:   Data Finance
---
## 분석 목적

투자를 위한 분석에는 다양한 종류가 있다. 가치투자를 위해 저평가된 주식 종목들을 발굴하는 분석도 있고, 차트의 흐름을 보는 기술적 분석도 있다. 애널리스트처럼 기업 탐방을 통해 비정형화된 정보를, 재무, 회계 지표와 같은 정형화된 정보와 종합하여 투자 판단을 내리기도 한다.

그 외에 `퀀트 투자`라는 것이 있다. 주관적 판단에 의해 비합리적인 선택을 할 수 있기 때문에 감정을 배제한 객관적 투자를 지향한다. 이 때문에 Data(Number) Driven Investment 라고도 한다. 가장 보편적으로 알려진 전략이 `저PER` `저PBR`전략이다. PER(주가수익비율)과 PBR(주가순자산비율)은 각각 `주가 / 주당순이익`, `주가 / 주당순자산`으로 산출되는 지표이다. 즉, 저PER, 저PBR이라는 것은 주당순이익, 주당순자산 대비 현재 주가가 낮다는 것으로, 현재 해당 종목이 주식 시장에서 저평가되어 있고, 앞으로 오를 가능성이 높다는 것을 의미하기도 한다. 이러한 퀀트 전략을, Historical Data를 기반으로 백테스팅을 통해 유의미한 성과가 있음을 증명한다.

그러나, 백테스팅을 통한 증명 및 전략 수정은 과적합으로부터 자유롭지 못하다. 증명 및 수정의 과정에서 모델이 왜곡될 가능성이 크기 때문이다. Out-of-sample을 활용한 검증 과정이 필수적이지만, 이를 활용한 결과가 마찬가지로 좋은 성과를 만들어내기는 쉽지 않다. 

따라서, 이러한 퀀트 모델의 한계점을 보완하기 위해 머신러닝 모델을 이용하여 **어떤 종목에 투자하면 좋을지** 알아보고자 한다. 또한, 퀀트 전략에서 주로 사용하는 데이터인 **PER, PBR 등을 활용하여 예측을 하는 것이 효과적인지** 알아보고자 한다. 더 나아가, 이러한 **지표들이 모델에서 얼만큼의 영향력을 가지는지, 결과와 어떤 관계를 가지는지** 알아보고자 한다.<BR/><BR/><BR/><BR/>

## 데이터 소개

코스피, 코스닥 시장에 상장되어 있는 종목 중 약 1500개의 종목을 활용했다. 사용한 feature 특성 상 금융 관련 종목들은 제외했고, SPAC(기업인수목적회사), 리츠 등 특수한 형태의 종목들과 관리종목, 거래정지종목들을 제외했다.

2016년부터 2019년까지 각 종목별 사업보고서 공시 데이터를 사용했다. 예측을 위해 사용한 feature는 유동비율, 부채비율, ROA 등과 같은 `재무비율` 데이터 21개와 PER, PBR, EPS 등과 같은 `투자지표` 데이터 18개로, 총 39개를 사용했다.

* 영업이익증가율, EBITDA증가율, EPS증가율의 `흑자전환` `적자전환` `적자지속`과 같은 categorical data는 새로운 feature인 영업이익증가율_cat, EBITDA증가율_cat, EPS증가율_cat을 만들어 `1, -1, -2`로 변환했다.
* 배당성향의 결측치는 모두 `0`으로 채웠다.
* 나머지 데이터들의 결측치는 각 feature 별 `평균`으로 채웠다.
* 사용한 feature들 중 `완전잠식`이 있는 경우 해당 데이터를 제거했고, 분석의 일관성을 위해 매년 12년 결산을 제외한 데이터들은 제거했다.

target은 사업보고서 공시 이후 3개월 뒤의 수익률을 산출하여 `상승`이면 `1`, `하락`이면 `0`으로 설정했다. 일반적으로, 12월 결산 사업보고서는 다음 해 3월 말 혹은 4월 초에 공시가 되기 때문에, 다음 해 4월 10일(공휴일이면 그 다음주 월요일) 가격 대비 3개월 뒤 가격의 수익률을 산출했다.<BR/><BR/><BR/><BR/>

## 적용 과정
